{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1d972811f954cbab1c97","webpack:///./src/index.js"],"names":["prototype","pixelRatio","canvas","document","createElement","context","getContext","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","window","devicePixelRatio","forEach","obj","func","p","hasOwnProperty","ratioArgs","value","key","_super","i","len","args","Array","slice","call","arguments","map","a","isArray","length","apply","stroke","lineWidth","fillText","font","replace","w","m","u","strokeText","CanvasRenderingContext2D","type","ratio","style","height","width","HTMLCanvasElement","Marquee","opts","getElementById","id","rect","getBoundingClientRect","right","left","h","bottom","top","ctx","lastLeft","gap","data","marqueeList","lastWidth","index","color","offset","Math","ceil","measureText","marquee","getLeft","push","clearRect","b","splice","fAddLastNode","drawText","t","shoot","requestAnimationFrame","draw","bind","fillStyle","last"],"mappings":"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","file":"canvas-marquee.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1d972811f954cbab1c97","/**\r\n * HiDPI Canvas Polyfill (1.0.10)\r\n *\r\n * Author: Jonathan D. Johnson (http://jondavidjohn.com)\r\n * Homepage: https://github.com/jondavidjohn/hidpi-canvas-polyfill\r\n * Issue Tracker: https://github.com/jondavidjohn/hidpi-canvas-polyfill/issues\r\n * License: Apache-2.0\r\n*/\r\n(function(prototype) {\r\n    var pixelRatio = (function() {\r\n            var canvas = document.createElement('canvas'),\r\n                    context = canvas.getContext('2d'),\r\n                    backingStore = context.backingStorePixelRatio ||\r\n                        context.webkitBackingStorePixelRatio ||\r\n                        context.mozBackingStorePixelRatio ||\r\n                        context.msBackingStorePixelRatio ||\r\n                        context.oBackingStorePixelRatio ||\r\n                        context.backingStorePixelRatio || 1;\r\n\r\n            return (window.devicePixelRatio || 1) / backingStore;\r\n        })(),\r\n\r\n        forEach = function(obj, func) {\r\n            for (var p in obj) {\r\n                if (obj.hasOwnProperty(p)) {\r\n                    func(obj[p], p);\r\n                }\r\n            }\r\n        },\r\n\r\n        ratioArgs = {\r\n            'fillRect': 'all',\r\n            'clearRect': 'all',\r\n            'strokeRect': 'all',\r\n            'moveTo': 'all',\r\n            'lineTo': 'all',\r\n            'arc': [0,1,2],\r\n            'arcTo': 'all',\r\n            'bezierCurveTo': 'all',\r\n            'isPointinPath': 'all',\r\n            'isPointinStroke': 'all',\r\n            'quadraticCurveTo': 'all',\r\n            'rect': 'all',\r\n            'translate': 'all',\r\n            'createRadialGradient': 'all',\r\n            'createLinearGradient': 'all'\r\n        };\r\n\r\n    if (pixelRatio === 1) return;\r\n\r\n    forEach(ratioArgs, function(value, key) {\r\n        prototype[key] = (function(_super) {\r\n            return function() {\r\n                var i, len,\r\n                    args = Array.prototype.slice.call(arguments);\r\n\r\n                if (value === 'all') {\r\n                    args = args.map(function(a) {\r\n                        return a * pixelRatio;\r\n                    });\r\n                }\r\n                else if (Array.isArray(value)) {\r\n                    for (i = 0, len = value.length; i < len; i++) {\r\n                        args[value[i]] *= pixelRatio;\r\n                    }\r\n                }\r\n\r\n                return _super.apply(this, args);\r\n            };\r\n        })(prototype[key]);\r\n    });\r\n\r\n        // Stroke lineWidth adjustment\r\n    prototype.stroke = (function(_super) {\r\n        return function() {\r\n            this.lineWidth *= pixelRatio;\r\n            _super.apply(this, arguments);\r\n            this.lineWidth /= pixelRatio;\r\n        };\r\n    })(prototype.stroke);\r\n\r\n    // Text\r\n    //\r\n    prototype.fillText = (function(_super) {\r\n        return function() {\r\n            var args = Array.prototype.slice.call(arguments);\r\n\r\n            args[1] *= pixelRatio; // x\r\n            args[2] *= pixelRatio; // y\r\n\r\n            this.font = this.font.replace(\r\n                /(\\d+)(px|em|rem|pt)/g,\r\n                function(w, m, u) {\r\n                    return (m * pixelRatio) + u;\r\n                }\r\n            );\r\n\r\n            _super.apply(this, args);\r\n\r\n            this.font = this.font.replace(\r\n                /(\\d+)(px|em|rem|pt)/g,\r\n                function(w, m, u) {\r\n                    return (m / pixelRatio) + u;\r\n                }\r\n            );\r\n        };\r\n    })(prototype.fillText);\r\n\r\n    prototype.strokeText = (function(_super) {\r\n        return function() {\r\n            var args = Array.prototype.slice.call(arguments);\r\n\r\n            args[1] *= pixelRatio; // x\r\n            args[2] *= pixelRatio; // y\r\n\r\n            this.font = this.font.replace(\r\n                /(\\d+)(px|em|rem|pt)/g,\r\n                function(w, m, u) {\r\n                    return (m * pixelRatio) + u;\r\n                }\r\n            );\r\n\r\n            _super.apply(this, args);\r\n\r\n            this.font = this.font.replace(\r\n                /(\\d+)(px|em|rem|pt)/g,\r\n                function(w, m, u) {\r\n                    return (m / pixelRatio) + u;\r\n                }\r\n            );\r\n        };\r\n    })(prototype.strokeText);\r\n})(CanvasRenderingContext2D.prototype);\r\n;(function(prototype) {\r\n    prototype.getContext = (function(_super) {\r\n        return function(type) {\r\n            var backingStore, ratio,\r\n                context = _super.call(this, type);\r\n\r\n            if (type === '2d') {\r\n\r\n                backingStore = context.backingStorePixelRatio ||\r\n                            context.webkitBackingStorePixelRatio ||\r\n                            context.mozBackingStorePixelRatio ||\r\n                            context.msBackingStorePixelRatio ||\r\n                            context.oBackingStorePixelRatio ||\r\n                            context.backingStorePixelRatio || 1;\r\n\r\n                ratio = (window.devicePixelRatio || 1) / backingStore;\r\n\r\n                if (ratio > 1) {\r\n                    this.style.height = this.height + 'px';\r\n                    this.style.width = this.width + 'px';\r\n                    this.width *= ratio;\r\n                    this.height *= ratio;\r\n                }\r\n            }\r\n\r\n            return context;\r\n        };\r\n    })(prototype.getContext);\r\n})(HTMLCanvasElement.prototype);\r\n    \r\nclass Marquee {\r\n    constructor(opts) {\r\n        this.opts = opts;\r\n        this.canvas = document.getElementById(opts.id);\r\n        let rect = this.canvas.getBoundingClientRect();\r\n        this.w = rect.right - rect.left;\r\n        this.h = rect.bottom - rect.top;\r\n        this.ctx = this.canvas.getContext('2d');\r\n        this.ctx.font = opts.font;\r\n        this.lastLeft = this.w;\r\n        this.gap = opts.gap;\r\n        this.data = opts.data;\r\n        this.marqueeList = [];\r\n        this.lastWidth = 0;\r\n        this.index = 0;\r\n    }\r\n    //添加弹幕列表\r\n    shoot(value) {\r\n        let top = this.opts.top;\r\n        let color = this.opts.color;\r\n        let offset = this.opts.offset || 1;\r\n        let width = Math.ceil(this.ctx.measureText(value).width);\r\n\r\n        let marquee = {\r\n            value: value,\r\n            top: top,\r\n            left: this.getLeft(width),\r\n            color: color,\r\n            offset: offset,\r\n            width: width\r\n        }\r\n        this.marqueeList.push(marquee);\r\n        return marquee;\r\n    }\r\n    //开始绘制\r\n    draw() {\r\n        if (this.marqueeList.length) {\r\n            this.ctx.clearRect(0, 0, this.w, this.h);\r\n            for (let i = 0; i < this.marqueeList.length; i++) {\r\n                let b = this.marqueeList[i];\r\n                if (b.left + b.width <= 0) {\r\n                    this.marqueeList.splice(i, 1);\r\n                    i--;\r\n                    this.fAddLastNode(b);\r\n                    continue;\r\n                }\r\n                b.left -= b.offset;\r\n                this.drawText(b);\r\n            }\r\n        }\r\n        else{\r\n            this.lastLeft = this.w;\r\n            this.data.forEach((t) => {\r\n                this.shoot(t);\r\n            })\r\n        }\r\n        requestAnimationFrame(this.draw.bind(this));\r\n    }\r\n    //绘制文字\r\n    drawText(marquee) {\r\n        this.ctx.fillStyle = marquee.color;\r\n        this.ctx.fillText(marquee.value, marquee.left, marquee.top);\r\n    }\r\n    fAddLastNode(b){\r\n        var last = this.marqueeList[this.marqueeList.length-1];\r\n        b.left = last.left + last.width + this.gap;\r\n        this.marqueeList.push(b);\r\n    }\r\n    getLeft(width){\r\n        this.lastLeft += this.lastWidth + this.gap;\r\n        this.lastWidth = width;\r\n        return this.lastLeft;\r\n    }\r\n}\r\n\r\nexport {Marquee};\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}